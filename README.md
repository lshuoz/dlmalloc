This isn't my code, but I like to use it. See http://g.oswego.edu/dl/html/malloc.html